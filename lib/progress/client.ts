export async function recordStepCompleteSafe(opts:{course:string,module:number,step:string}){try{await fetch('/api/progress/complete',{method:'POST',headers:{'content-type':'application/json'},body:JSON.stringify(opts)})}catch(e){/* fallback */const k=`progress:${opts.course}`;const raw=typeof window!=='undefined'?localStorage.getItem(k):null;const obj=raw?JSON.parse(raw):{};obj[`m${opts.module}:${opts.step}`]=true;try{localStorage.setItem(k,JSON.stringify(obj))}catch(_){}}}
